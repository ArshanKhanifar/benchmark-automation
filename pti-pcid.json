{
	"sendfiles": [
		"MEF406F1_0B000025.bin"
	],
	"command_once": [
		"make -C /usr/src/tools/tools/syscall_timing",
		"make install -C /usr/src/tools/tools/syscall_timing"
	],
	"common_setup": [
		"sed -i '.bak' '/.*pti=[01]$/d' /boot/loader.conf",
		"sed -i '.bak' '/.*pcid_enabled=[01]$/d' /boot/loader.conf"
	],
	"common_commands": [
		"kldload cpuctl",
		"for x in $(jot $(sysctl -n hw.ncpu) 0); do cpucontrol -u -d input/ /dev/cpuctl$x; done",
		"cpucontrol -e /dev/cpuctl10",
		"sysctl vm.pmap > output/pmap.log",
		"uname -a > output/uname.log",
		"kenv | grep \"^smbios\\.\" > output/kenv.log",
		"dmesg > output/dmesg.log",
		"x86info -a > output/x86info.log",
		"/usr/obj/usr/src/amd64.amd64/tools/tools/syscall_timing/syscall_timing getppid > output/getppid.log"
	],
	"benchmarks": [
		{
			"name": "pti-0-pcid-0",
			"setup": [
				"echo 'vm.pmap.pti=0' >> /boot/loader.conf",
				"echo 'vm.pmap.pcid_enabled=0' >> /boot/loader.conf"
			],
			"needs_reboot": true
		},
		{
			"name": "pti-0-pcid-1",
			"setup": [
				"echo 'vm.pmap.pti=0' >> /boot/loader.conf",
				"echo 'vm.pmap.pcid_enabled=1' >> /boot/loader.conf"
			],
			"needs_reboot": true 
		},
		{
			"name": "pti-1-pcid-1",
			"setup": [
				"echo 'vm.pmap.pti=1' >> /boot/loader.conf",
				"echo 'vm.pmap.pcid_enabled=1' >> /boot/loader.conf"
			],
			"needs_reboot": true
		},
		{
			"name": "pti-1-pcid-0",
			"setup": [
				"echo 'vm.pmap.pti=1' >> /boot/loader.conf",
				"echo 'vm.pmap.pcid_enabled=0' >> /boot/loader.conf"
			],
			"needs_reboot": true
		}
	]
}

